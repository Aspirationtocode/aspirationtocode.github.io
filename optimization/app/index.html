<!DOCTYPE html><html lang="ru" class="no-js"><head><meta charset="utf-8"><title>Оптимизация</title><meta name="description" content=""><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta property="og:image" content="path/to/image.jpg"><link rel="shortcut icon" href="img/favicon/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="img/favicon/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="72x72" href="img/favicon/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="114x114" href="img/favicon/apple-touch-icon-114x114.png"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"><!-- Header CSS (First Sections of Website: paste after release from _header.min.css here)--><style> </style><!-- Load CSS & WebFonts Main Function--><script>!function(e){"use strict";function t(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function n(t,n){return e.localStorage&&localStorage[t+"_content"]&&localStorage[t+"_file"]===n}function a(t,a){if(e.localStorage&&e.XMLHttpRequest)n(t,a)?o(localStorage[t+"_content"]):l(t,a);else{var s=r.createElement("link");s.href=a,s.id=t,s.rel="stylesheet",s.type="text/css",r.getElementsByTagName("head")[0].appendChild(s),r.cookie=t}}function l(e,t){var n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&(o(n.responseText),localStorage[e+"_content"]=n.responseText,localStorage[e+"_file"]=t)},n.send()}function o(e){var t=r.createElement("style");t.setAttribute("type","text/css"),r.getElementsByTagName("head")[0].appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e}var r=e.document;e.loadCSS=function(e,t,n){var a,l=r.createElement("link");if(t)a=t;else{var o;o=r.querySelectorAll?r.querySelectorAll("style,link[rel=stylesheet],script"):(r.body||r.getElementsByTagName("head")[0]).childNodes,a=o[o.length-1]}var s=r.styleSheets;l.rel="stylesheet",l.href=e,l.media="only x",a.parentNode.insertBefore(l,t?a:a.nextSibling);var c=function(e){for(var t=l.href,n=s.length;n--;)if(s[n].href===t)return e();setTimeout(function(){c(e)})};return l.onloadcssdefined=c,c(function(){l.media=n||"all"}),l},e.loadLocalStorageCSS=function(l,o){n(l,o)||r.cookie.indexOf(l)>-1?a(l,o):t(e,"load",function(){a(l,o)})}}(this);</script><!-- Load CSS Start--><script>loadCSS(	"css/fonts.min.css" );</script><script>loadCSS( "css/header.min.css", false, "all" );</script><script>loadCSS( "css/main.min.css", false, "all" );</script><!-- Load CSS End--><!-- Load CSS Compiled without JS--><noscript><link rel="stylesheet" href="css/fonts.min.css"><link rel="stylesheet" href="css/main.min.css"></noscript></head><body><h1></h1>Проблемы сайта <a href="https://lifehacker.ru/">Lifehacker.ru.</a><p>Загружая страницу с помощью плагина Page Speed для Chrome были обнаружены такие проблемы:</p><ul><li> <h3>JavaScript, CSS, шрифты блокируют отображение верхней части страницы</h3><h4 class="solve">Пути решения проблемы:</h4><p>Как было сказано на лекции, нет повода загружать javascript не асинхронно. Именно поэтому нужно удалить или загружать асинхронно следующие js файлы на странице:</p><ul><li> <a href="https://lifehacker.ru/wp-includes/js/jquery/jquery.js?ver=1.12.4">https://lifehacker.ru/wp-includes/js/jquery/jquery.js?ver=1.12.4</a></li><li> <a href="https://lifehacker.ru/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1">https://lifehacker.ru/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/lh-send-typo/js/app.js?ver=1.5">https://lifehacker.ru/wp-content/plugins/lh-send-typo/js/app.js?ver=1.5</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/lh-social-slider/assets/js/common.js?ver=1.8">https://lifehacker.ru/wp-content/plugins/lh-social-slider/assets/js/common.js?ver=1.8</a></li><li> <a href="https://lifehacker.ru/wp-content/themes/lifehacker/static/js/adfox.asyn.code.ver3.js?ver=3.0">https://lifehacker.ru/wp-content/themes/lifehacker/static/js/adfox.asyn.code.ver3.js?ver=3.0</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/lh-widgets/js/viewed.js?ver=1.6">https://lifehacker.ru/wp-content/plugins/lh-widgets/js/viewed.js?ver=1.6</a></li><li> <a href="https://cdn.onthe.io/io.js?V6Mze3eoxmNt">https://cdn.onthe.io/io.js?V6Mze3eoxmNt</a></li></ul><p>Браузер запрашивают внешние файлы CSS перед отображением контента на экране. Это приводит к задержке и замедляет обработку страницы, следует стремиться к тому, чтобы загружать только самые необходимые стили. </p><ul><li> <a href="https://lifehacker.ru/wp-content/plugins/lh-mumigrate/static/public/css/main.css?ver=4.5.3">https://lifehacker.ru/wp-content/plugins/lh-mumigrate/static/public/css/main.css?ver=4.5.3</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/lh-post-source/static/public/main.min.css?ver=2">https://lifehacker.ru/wp-content/plugins/lh-post-source/static/public/main.min.css?ver=2</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/lh-send-typo/css/styles.css?ver=1.5">https://lifehacker.ru/wp-content/plugins/lh-send-typo/css/styles.css?ver=1.5</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/lh-slider/static/public/all.min.css?ver=1.0.0">https://lifehacker.ru/wp-content/plugins/lh-slider/static/public/all.min.css?ver=1.0.0</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/lh-social-slider/assets/css/style.css?ver=1.10">https://lifehacker.ru/wp-content/plugins/lh-social-slider/assets/css/style.css?ver=1.10</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/lh-social/static/main.min.css?ver=2.9">https://lifehacker.ru/wp-content/plugins/lh-social/static/main.min.css?ver=2.9</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/responsive-lightbox/assets/nivo/nivo-lightbox.css?ver=1.6.8">https://lifehacker.ru/wp-content/plugins/responsive-lightbox/assets/nivo/nivo-lightbox.css?ver=1.6.8</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/responsive-lightbox/assets/nivo/themes/default/default.css?ver=1.6.8">https://lifehacker.ru/wp-content/plugins/responsive-lightbox/assets/nivo/themes/default/default.css?ver=1.6.8</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/wp-ajax-query-shortcode/js/prettyPhoto/css/prettyPhoto.css?ver=4.5.3">https://lifehacker.ru/wp-content/plugins/wp-ajax-query-shortcode/js/prettyPhoto/css/prettyPhoto.css?ver=4.5.3</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/wp-ajax-query-shortcode/style.css?ver=4.5.3">https://lifehacker.ru/wp-content/plugins/wp-ajax-query-shortcode/style.css?ver=4.5.3</a></li><li> <a href="https://lifehacker.ru/wp-content/themes/lifehacker/static/fonts/style.css?ver=13">https://lifehacker.ru/wp-content/themes/lifehacker/static/fonts/style.css?ver=13</a></li><li> <a href="https://lifehacker.ru/wp-content/themes/lifehacker/static/styles/vendors.min.css?ver=13">https://lifehacker.ru/wp-content/themes/lifehacker/static/styles/vendors.min.css?ver=13</a></li><li> <a href="https://lifehacker.ru/wp-content/themes/lifehacker/static/styles/all.min.css?ver=13">https://lifehacker.ru/wp-content/themes/lifehacker/static/styles/all.min.css?ver=13</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/lh-widgets/css/widgets.css?ver=1.4">https://lifehacker.ru/wp-content/plugins/lh-widgets/css/widgets.css?ver=1.4</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/jetpack/modules/widgets/image-widget/style.css?ver=20140808">https://lifehacker.ru/wp-content/plugins/jetpack/modules/widgets/image-widget/style.css?ver=20140808</a></li><li> <a href="https://lifehacker.ru/wp-content/plugins/jetpack/css/jetpack.css?ver=4.1.1">https://lifehacker.ru/wp-content/plugins/jetpack/css/jetpack.css?ver=4.1.1</a></li></ul><p>Браузер запрашивают внешние файлы шрифтов.</p><ul><li> </li><a href="https://fonts.googleapis.com/…talic&amp;subset=latin,cyrillic,cyrillic-ext">https://fonts.googleapis.com/…talic&subset=latin,cyrillic,cyrillic-ext</a><li> </li><a href="https://fonts.googleapis.com/…oboto+Slab:400,700&amp;subset=latin,cyrillic">https://fonts.googleapis.com/…oboto+Slab:400,700&subset=latin,cyrillic</a><p>Шрифты вообще лучше грузить через localStorage. Пример просто великолепный, можно чистить localStorage и проверять: </p><a href="http://bdadam.com/samples/webfonts2/localStorage.html">Ссылка на пример</a></ul></li><li> <h3>Неоптимизированные изображения</h3><h4 class="solve">Пути решения проблемы:</h4><p>При сжатии изображений без потери качества можно было бы сэкономить 272.0 КБ (4 %), что, конечно же, не мало.</p></li><li><h3>Большое число переадресаций</h3><h4 class="solve">Пути решения проблемы:</h4><p>В данной ситуации нужно просто постараться уменьших число этих самых переадресаций:</p><h4>1-ая цепь переадресаций:</h4><ul><li><a href="https://x.bidswitch.net/sync?ssp=teads">1 переадресация</a></li><li><a href="https://www.wtp101.com/pull_sync?pid=bidswitch&amp;bidswitch_ssp_id=teads">2 переадресация</a></li><li><a href="https://x.bidswitch.net/sync?dsp_id=17&amp;user_group=1&amp;user_id=1c39491a-a875-4ea3-958c-67a6363b344b&amp;expires=3&amp;ssp=teads">3 переадресация</a></li><li><a href="https://sync.teads.tv/um?eid=20&amp;uid=7f4ef539-5528-43ba-b080-35419e38c50e">4 переадресация</a></li></ul><h4>2-ая цепь переадресаций:</h4><ul><li><a href="https://track.eyeviewads.com/sync/teads">1 переадресация</a></li><li><a href="https://pixeltrack.eyeviewads.com/sync/teads?">2 переадресация</a></li><li><a href="https://sync.teads.tv/um?eid=45&amp;uid=694b920ca72cb6ff7d63883a42f18e87">3 переадресация</a></li></ul><h4>3-яя цепь переадресаций:</h4><ul><li><a href="https://ad.adriver.ru/cgi-bin/rle.cgi?sid=1&amp;bt=21&amp;ad=593515&amp;pid=2389482&amp;bid=4567599&amp;bn=4567599">1 переадресация</a></li><li><a href="https://ar.tns-counter.ru/V13a****ar_ru/ru/CP1251/tmsec=38279_593515-2389482/0">2 переадресация</a></li></ul><h4>4-ая цепь переадресаций:</h4><ul><li><a href="https://ad.adriver.ru/cgi-bin/rle.cgi?sid=1&amp;bt=21&amp;ad=593515&amp;pid=2391194&amp;bid=4572691&amp;bn=4572691">1 переадресация</a></li><li><a href="https://ar.tns-counter.ru/V13a****ar_ru/ru/CP1251/tmsec=38279_593515-2391194/0">2 переадресация</a></li></ul><h4>5-ая цепь переадресаций:</h4><ul><li><a href="https://ad.turn.com/r/cs?pid=41">1 переадресация</a></li><li><a href="https://sync.teads.tv/um?eid=11&amp;uid=8549372245405374550">2 переадресация</a></li></ul></li><li> <h3>Сжатие</h3><h4 class="solve">Пути решения проблемы:</h4><p>Необходимо сжать следующе ресурсы (Экономия - 65 КБ(63%))	:</p><ol><li><a href="https://lifehacker.ru/wp-content/themes/lifehacker/static/img/logo.svg">https://lifehacker.ru/wp-content/themes/lifehacker/static/img/logo.svg</a></li><li>...</li></ol></li><li><h3>А что же нам расскажет http://www.gidnetwork.com/tools/gzip-test.php про gzip сжатие на сайте <a href="https://lifehacker.ru/">Lifehacker.ru?</a></h3><img src="img/gziplifehacker.png" alt=""><h3>А что же, например, про <a href="https://www.yandex.ru/">Yandex.ru?</a></h3><img src="img/gzipyandex.png" alt=""><p>Вот так вот и получается. Главная страница яндекса экономит 73 %, что совсем нельзя сказать про сайт lifehacker.ru. Для последнего этот лайфхак сжатия был выше их сил =)</p></li><li><h3>А что же нам расскажет TimeLine?</h3><img src="img/circle.png" alt=""><p>В итоге страница грузиться 11,5 секунд. Печально.</p></li><li><h3>А что же нам расскажет Audits?</h3><img src="img/audits.png" alt=""></li><li><h3>Вывод</h3><ul><li>Сайту необходима максимальная параллелизация загрузки ресурсов. 141 запрос к одному lifehacker.ru это не дело.</li><li>Сайту необходимо комбинировать js-файлы так, чтобы их загружалось как можно меньше (51 js-файл грузится с graph.facebook.com)</li><li>К закэшированным сжатым ресурсам нужно добавлять заголовок "Vary: Accept-Encoding" ,т.к он сообщает прокси-серверам, что нужно кэшировать обе версии русурса: cжатую и не сжатую. Это помогает избежать проблем при работе с общедоступными прокси-серверами, которые не распознают наличие заголовка "Content-Encoding". Не говоря уже о том, что на сайте многие ресурсы кэшируются очень маленьким сроком или вообще не кэшируются, заставляя пользователей загружать все снова и снова.</li><li>Сайту нужно задуматься о критическом CSS, конечно речь не пойдет о 14кб, но все же. </li><li>Source-map-ы можно было бы и убрать из production'а.</li></ul><p>Изучив вот <a href="http://frontender.info/performance-optimization/"> эту</a> статью, я понял что инструментов для работы с оптимизацией загрузки достаточно, надо только захотеть. И я думаю поводом для этого не должна быть суперформула n секунд = n*n*n долларов, а просто желание делать web лучше.</p><p>Статьи, которые помогли выполнить задание:<a href="http://web-standards.ru/articles/front-end-performance/" style="display: block">Статья 1</a><a href="http://frontender.info/performance-optimization/" style="display: block">Статья 2</a><a href="https://www.voorhoede.nl/en/blog/why-our-website-is-faster-than-yours/" style="display: block">Статья 3</a><a href="https://developers.google.com/web/fundamentals/performance/" style="display: block">Статья 4</a><a href="https://developers.google.com/speed/docs/insights/mobile" style="display: block">Статья 5</a></p><p>Помогла лекция ШРИ за 2013 год.</p></li></ul><!-- Поддержка старых браузеров--><!--[if lt IE 9]>
<script src="libs/html5shiv/es5-shim.min.js"></script>
<script src="libs/html5shiv/html5shiv.min.js"></script>
<script src="libs/html5shiv/html5shiv-printshiv.min.js"></script>
<script src="libs/respond/respond.min.js"></script>
<![endif]--><!-- Load Scripts--><script>var scr = {"scripts":[
{"src" : "js/libs.js", "async" : false},
{"src" : "js/common.js", "async" : false}
]};!function(t,n,r){"use strict";var c=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return!1;for(var r=0;r<t.length;r++){var c=n.createElement("script"),e=t[r];c.src=e.src,c.async=e.async,n.body.appendChild(c)}return!0};t.addEventListener?t.addEventListener("load",function(){c(r.scripts);},!1):t.attachEvent?t.attachEvent("onload",function(){c(r.scripts)}):t.onload=function(){c(r.scripts)}}(window,document,scr);</script></body></html>